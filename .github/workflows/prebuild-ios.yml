name: Regenerate iOS Folder

on:
  workflow_dispatch: # Manual trigger

jobs:
  regen-ios:
    runs-on: ubuntu-latest

    steps:
      - name: â¬‡ï¸ Checkout Repo
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: ğŸŸ¢ Set up Node
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: ğŸ“¦ Install Dependencies
        run: |
          npm ci
          npx expo install --fix

      - name: ğŸ§¹ Remove old ios folder
        run: rm -rf ios

      - name: âš™ï¸ Run expo prebuild (iOS only)
        run: npx expo prebuild --platform ios --clean --no-install

      - name: ğŸ—ƒï¸ Upload iOS Folder as Artifact
        uses: actions/upload-artifact@v4
        with:
          name: ios-folder
          path: ios
